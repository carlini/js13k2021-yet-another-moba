var Mt=0,bt=[],zt=(j=1,-1);function At(t,i){if(void 0===t||null==t)return t;if(t.length&&t.map)return t.map(t=>At(t,i));if(!(t instanceof Object))return t;if(!i&&t.uid)return{uid:t.uid};var s={};return Object.keys(t).map(i=>{s[i]=At(t[i])}),s}_=0;function Qt(t){return(i,s,h)=>{try{t(i,s,h)}catch(t){clearInterval(jt),bt.map(t=>t.emit(16)),Ht(),zt=-1}}}var Tt=Qt(function(){var t=l();if(_i=t,0==zt){St.map(i=>i.pt(t-Mt)),Gt={},St.map(t=>Gt[t.uid]=t),l();var i=St.map(t=>{var i=JSON.parse(JSON.stringify(At(t,1))),s=JSON.parse(t.oi||"{}"),h=Object.keys(i).reduce((t,h)=>JSON.stringify(i[h])===JSON.stringify(s[h])?t:{...t,[h]:i[h]},{});return delete h.R,delete h.tt,delete h.oi,Object.keys(h).length&&(h.uid=i.uid),i.oi=0,t.oi=JSON.stringify(i),h}).filter(t=>Object.keys(t).length);i.length&&bt.map(t=>{t.emit(2,i)}),St=St.filter(t=>!t.ot)}1==zt&&(setTimeout(t=>{zt=2,Ct=l()+3e3},6e3),zt=1.5),2==zt&&(Ct<Mt?(Ct=undefined,Ht(),zt=0,bt.map(t=>t.emit(11,St.map(t=>At(t,1))))):bt.map(t=>{t.emit(12,Ct-Mt)})),Mt=t});module.exports={io:Qt(t=>{var n={Pt:0,At:0,gt:1-Math.round(f([...bt.map(t=>t.St.gt),0])/(bt.length+1))};function e(i,s){t.on(i,Qt(s))}bt.push(t),e(1,(i,s)=>{var h=n.Pt;t.St=n=new E(n.gt,i),n.Jt=b(U[n.gt],p),s&&(n.Pt=h),St.push(n),t.emit(19,n)}),e(3,i=>{t.emit(4,eval(i))}),e("disconnect",i=>{bt=bt.filter(i=>i!=t),n&&(n.At=-1e6),0==bt.length&&(clearInterval(jt),zt=-1,Ct=undefined)}),e(15,t=>{n.Jt=z(t)}),e(13,i=>{t.emit(7,i,l())}),e(0,t=>{ut(t=>St.filter(t=>!t.ai&&t.gt!=n.gt&&t.R.I(n.R)<20&&(t instanceof X||t instanceof Y)).map(t=>{t.Jt=y(t.R,t.tt,t.R.C(s(50*r(),50*r(),50)),10,l()),t.ai=1,St.push(new tt(n.R,t,300))}),4,500)}),e(18,(t,i,s)=>{St.push(new Y(h(t),h(i),n,s||0))}),e(5,(t,i)=>{Gt[t]&&(Gt[t].At=Math.min(Gt[t].At+i,Gt[t].Qt),St.push(new st(Gt[t])))}),e(9,(t,i)=>{Gt[t]&&(Gt[t].Tt+=i,setTimeout(s=>Gt[t]&&(Gt[t].Tt=Math.max(Gt[t].Tt-i,0)),2e3))}),e(14,t=>{t=h(t),setTimeout(i=>n.Jt=b(t,c(t.U(n.R)-Math.PI/2)),200),bt.map(i=>i.emit(6,n.uid,t.H()))}),e(10,(t,h)=>{Gt[t]&&(n.zt=Gt[t].zt=l()+h,n.Jt=b(n.R,n.tt),Gt[t].Jt=y(Gt[t].R,0,Gt[t].R.F(n.R,3),3200/h,l(),1),St.push(new tt(n.R.C(i(n.tt,s(2,1,0))),Gt[t],h)),St.push(new tt(n.R.C(i(n.tt,s(-2,1,0))),Gt[t],h)))}),function(t){-1==zt&&void 0===Ct&&(Ct=l()+800,zt=2,jt=setInterval(Tt,1e3/Pt));0==zt&&t.emit(11,St.map(t=>At(t,1)))}(t)})};var Ct,jt,Ot,St,Pt=40;function Ht(t){t&&(bt=[]),$t=[],Gt={},(St=[]).push(new V(0,s(15,15,0),0)),St.push(new V(1,s(-15,-15,0),0)),St.push(new V(0,s(30,30,0),1)),St.push(new V(1,s(-30,-30,0),1))}S()