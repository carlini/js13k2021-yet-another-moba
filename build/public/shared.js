var t,i,s=(t,i,s,h)=>new x(t,i,s,h),h=t=>s(...t),n=(t,i)=>Array(t).fill().map((t,s)=>s+(i||0)),e=(t,i)=>n(t.length/i).map(s=>t.slice(s*i,(s+1)*i)),r=t=>2*Math.random()-1,o=t=>s(r()*(t=t||1),r()*t,r()*t),a=(t,i,s)=>(t.filter(s||(t=>1)).map(t=>[t,i(t)]).sort((t,i)=>i[1]-t[1])[0]||[void 0])[0],c=t=>[Math.cos(t),-Math.sin(t),0,0,Math.sin(t),Math.cos(t),0,0,0,0,1,0,0,0,0,1],u=0,_=0;function l(){return+new Date+u+_}var v=(t,i,s)=>t.A(i).M(s.A(i))._(),d=(t,i,s)=>Math.min(Math.max(i,t),s),f=t=>t.reduce((t,i)=>t+i),m=t=>[1,0,0,0,0,Math.cos(t),-Math.sin(t),0,0,Math.sin(t),Math.cos(t),0,0,0,0,1],w=t=>[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],p=c(0);class x{constructor(t,i,s,h){this.x=+t||0,this.y=+i||0,this.z=+s||0,this.w=+h||0,this.T=x.name}C(t){return s(this.x+t.x,this.y+t.y,this.z+t.z)}A(t){return this.C(t.O())}O(){return this.S(-1)}S(t){return s(this.x*t,this.y*t,this.z*t)}P(t){return s(this.x*t.x,this.y*t.y,this.z*t.z)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}H(){return[this.x,this.y,this.z]}K(){return[...this.H(),this.w]}N(t,i){return this.S(1-i).C(t.S(i))}F(t,i){var s=t.A(this);return s.Z()>i&&(s=s._().S(i)),this.C(s)}M(t){return s(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}$(){return h(this.K())}J(){return this.dot(this)}Z(){return this.J()**.5}noz(){return s(this.x,this.y,0)}I(t){return this.A(t).Z()}U(t){return Math.atan2(t.y-this.y,t.x-this.x)}_(){return this.S(1/(this.Z()+1e-30))}}function g(){return y(...arguments,l())}function y(t,s,h,n,e,r){for(var o=h.A(t).U(Q),a=s?i(s,T.O()).U(Q):o;o-a>Math.PI;)a+=2*Math.PI;for(;a-o>Math.PI;)a-=2*Math.PI;var u=a-o,_=50*Math.abs(u),v=1e3*t.I(h)/n+_,f=e+v;let m=Math.min(l(),e+_),w=1+(m-e)/v;return _/=w,v/=w,{D:y.name,act:i=>[c(o*d((i-m)/_,0,1)+a*(1-d((i-m)/_,0,1))-Math.PI/2),t.N(h,d((i-m-_)/(v-_),0,1))],G:t=>f<t,L:r,args:[...arguments]}}function M(t,i,s,h){return{D:M.name,act:(n,e)=>[i,t=t.F(s.R,h*e/1e3)],G:i=>!s.R||t.I(s.R)<.1,args:[...arguments]}}function b(t,i){return{D:b.name,act:s=>[i,t],G:t=>1,args:[...arguments]}}function z(t){if(null===t)return t;var i,s=Gt[t.uid];return s||(t.D?i=eval(t.D)(...t.args.map(z)):t.T?(i=new(eval(t.T))(...(t.args||[]).map(z)),Object.keys(t).map(s=>{"__83"!=s&&(i[s]=z(t[s]))})):t instanceof Object?(Object.keys(t).map(i=>{"__83"!=i&&(t[i]=z(t[i]))}),i=t):i=t,i)}var A,Q=new x(0,0,0),T=(s(1,0,0),s(0,1,0)),C=s(0,0,1),j=0;class O{constructor(t,i,s,h,e){j||(this.R=i,this.uid=I(),this.V=(this.B=new Float32Array(t[0])).length/3,this.m=new Float32Array(t[0].length),this.h=new Float32Array(t[0].length),this.W=t[2],this.X=new Float32Array(t[1]),this.Y=n(5).map(t=>Ot.createBuffer()),this.tt=s||p,this.it=new Float32Array(Array(this.V).fill(h||[1,1,1]).flat()),this.st=e||1,this.ht=Ot.TRIANGLES,this.nt=[this],this.et())}et(){[this.B,this.X,this.m,this.h,this.it].map((t,i)=>{Ot.bindBuffer(Ot.ARRAY_BUFFER,this.Y[i]),Ot.bufferData(Ot.ARRAY_BUFFER,t,Ot.DYNAMIC_DRAW)})}rt(){Ot.uniform4fv(It.c,this.R.O().K()),this.tt!=A&&(A=this.tt,Ot.uniformMatrix4fv(It.b,0,this.tt)),[It.k,It.r,It.m,It.h,It.u].map((t,i)=>{Ot.enableVertexAttribArray(t),Ot.bindBuffer(Ot.ARRAY_BUFFER,this.Y[i]),Ot.vertexAttribPointer(t,3,Ot.FLOAT,0,0,0)}),Ot.uniform1i(It.f,this.st),Ot.drawArrays(this.ht,0,this.V)}}var S=()=>{var s=e(n(4),1),r=(e(n(16),4).map(t=>s[0].map((i,h)=>s.reduce((i,s,n)=>`${i}+b[${s[h]}]*a[${t[n]}]`,0))),t=>`(a,b)=>[${[].concat(...e(n(16),4).map(i=>t[0].map((s,h)=>t.reduce((t,s,n)=>`${t}+b[${s[h]}]*a[${i[n]}]`,0))))}]`);t=eval(r(e(n(16),4)));var o=eval(r(e(n(4),1)));i=((t,i)=>h(o(t,i.K())))};function P(t){function n(i){return parseInt(t.splice(0,i).join``,2)}t=t.splice(0,n(16));for(var e=n(3),r=n(3),o=[],a=[],c=[],u=0;t.length;)0==n(1)?a.unshift(a[n(5)]):a.unshift(i(m(Math.PI/2),s(n(e)/2**e,n(e)/2**e,n(e)/2**e))),o[u=(u+n(1)+1)%3]=a[0],a.length>2&&(c.unshift(o.map(t=>t)),c.length%2==1&&c[0].reverse());return[4,2,1].map((t,i)=>{if(r&t){var s=[1,1,1];s[i]*=-1,c=[...c,...c.map(t=>t.map(t=>t.P(h(s))).reverse())]}}),c}function H(t,h,n,e,r){h instanceof x||(h=s(h,h,h));var o=t.flat(1).reduce((t,i)=>t.C(i));o=o.S(1/t.flat(1).length);var a=(t=(t=(t=t.map(t=>t.map(t=>t.A(o.noz())))).map(t=>t.map(t=>i(e||p,t.P(h).C(n||Q))))).map(t=>t.map(r||(t=>t)))).map(t=>{var i=v(...t).O().H();return[i,i,i]});return[t.flat().map(t=>t.H()).flat(),a.flat(2),t]}var K,N=[];function k(){return K=cQ.width/cQ.height,Ot.viewport(0,0,cQ.width,cQ.height),e=>{Ot.clear(Ot.COLOR_BUFFER_BIT|Ot.DEPTH_BUFFER_BIT),Ot.uniform1f(It.B,_i),ai.rt(),Ot.depthMask(1),Ot.enable(Ot.DEPTH_TEST),Ot.uniform1f(It.o,oi.ot),Ot.uniform4fv(It.a,kt.K()),Ot.uniformMatrix4fv(It.d,1,(i=Math.tan(Math.PI/2-.45),Zt=[[1,0,0,kt.x,0,1,0,kt.y,0,0,1,kt.z,0,0,0,1],Ft,[K/i,0,0,0,0,0,1,0,0,1/i,0,0,0,0,-1,1]].reduce(t))),St.map(t=>t.rt()),Ot.enable(Ot.BLEND),Ot.depthMask(0),Ot.blendFunc(Ot.SRC_ALPHA,Ot.ONE),Kt.map(t=>t.rt());var r=h(oi.R.H().map(t=>t>>5<<5));n(512).map(t=>{var i=s((7&t)-3,(7&(t>>=3))-3,(t>>3)-3);i.Z()<3&&(glitter.R=r.C(i.S(32)),glitter.rt())}),Ot.disable(Ot.DEPTH_TEST),Ot.blendFunc(Ot.SRC_ALPHA,Ot.ONE_MINUS_SRC_ALPHA),$t.map(t=>t.rt()),$t.sort((t,i)=>t.z-i.z).map(t=>t.rt()),Ot.disable(Ot.BLEND)};var i}class F extends O{constructor(t,i,s,h,e,r){super([n(3*(t|=0)).map(t=>1e8),n(t).map(t=>h).flat(1)],Q,p,s,2),this.at=n(3*t),this.ct=s,this.ut=Array(t).fill(0),this.ht=Ot.POINTS,this._t=i,this.vt=e,this.dt=1e6,this.ft=!r,this.wt=this,this.uid=I()}pt(t,i){this.wt.ot&&!this.lt&&(this.lt=l()+500),this.lt<l()&&(this.ot=1);for(var s=0,h=Math.min(i||1e9,this.dt)*t/16.7,n=0;n<this.ut.length;n++)if((this.ut[n]-=t)<0&&s<h&&!this.lt){s++;var[e,r,o]=this.vt(t,h);this.ut[n]=1e3*this._t*(this.ft||Math.random()),this.it[3*n]=this.ct[0],this.it[3*n+1]=o||this.ct[1],this.h[3*n]=_i,this.h[3*n+1]=_i+this.ut[n],this.B.set(e.H(),3*n),this.m.set(r.H(),3*n)}s&&this.et()}}class Z extends F{constructor(t,i,s,h,n,e){super(i,s,[.2,.5*(h||1),0],r()<.5?[.3,.3,.3]:[.6,.4,.3],t=>[this.pos.C(o()),o()._().S(this.xt)]),this.pos=t,this.dt=5,this.xt=n||1}}class $ extends F{constructor(t,s,h){super(t instanceof E?200:50,.3,[.8,s,1],R[t.gt],t=>[this.yt.R.C(i(this.yt.tt,h)).C(o(.1*s)),i(this.yt.tt,T.S(.1).C(o(.01)))]),this.Mt=s,this.yt=t,this.dt=5,this.R=Q,this.bt=this.yt.R}pt(t){super.pt(t),this.yt.ot&&!this.lt&&(this.lt=1,setTimeout(t=>this.ot=1,1e3)),this._t=this.Mt**.5/2+Math.min(this.yt.R.I(this.bt)/2,.5),this.bt=this.yt.R}}var J=0;function I(){return j+":"+J++}var U=[s(35,35,0),s(-35,-35,0)];class q{constructor(){this.uid=I(),this.At=1,this.Qt=1,this.Tt=0,this.R=Q}setup(){this.nt=[]}rt(){this.nt.map(t=>t.R=this.R),this.nt.map(t=>t.tt=this.tt),this.nt.map(t=>t.rt())}Ct(){return this.zt&&this.zt>l()}toJSON(){var t={};for(var i of Object.keys(this))this[i]&&this[i].uid&&Gt[this[i].uid]?t[i]={uid:this[i].uid}:t[i]=this[i];return t}pt(){}jt(t,i,s){this.Tt>0?(this.Tt-=t,this.At+=Math.min(this.Tt,0)):this.At-=t,(i instanceof E||this instanceof E||i instanceof V)&&(this instanceof V||(this.Ot=i),St.push(new at(this.R,12*t,1,.8,.05))),this.At<=0&&(i instanceof E&&(bt.map(t=>t.St==i&&t.emit(17,0)),i.Pt+=.2),St.map(t=>t.gt!=this.gt&&(t.Pt+=.1)),n(3).map(t=>{setTimeout(t=>St.push(new(i instanceof E?at:ot)((s||this).R.C(o(2)),10,1.5,1,.05,null)),500*Math.random())})),this.ot=this.At<=0}Ht(){St.push(...this.nt.map(i=>new D(i,this.R,t(this.tt,i.tt))))}}class D extends q{constructor(t,i,s){super(),this.nt=[t],this.Kt=o(),this.Nt=C.C(o())._(),this.R=i,this.tt=s,setTimeout(t=>this.ot=1,1e4),n(6).map(t=>{setTimeout(t=>St.push(new ot(this.R,10,1.5,1,.05,null)),1e3*Math.random())})}pt(i){var s=.002*(1+this.Nt.Z())*i;this.R=this.R.C(this.Nt.S(.01*i)),this.tt=t(this.tt,[c(this.Kt.x*s),m(this.Kt.y*s),w(this.Kt.z*s)].reduce(t))}Ht(){}}var G=[[.7,0,0],[0,1,1],[1,1,1]],L=[[.7,.2,0],[0,.2,.7]],R=[[.7,.4,.4],[.4,.4,.7]];class V extends q{constructor(t,i,s){super(),this.args=[...arguments],this.T=V.name,i.z=3,this.R=i,this.tt=m(Math.PI),this.gt=t,this.kt=0,this.Ft=s,this.Zt=0,this.At=this.Qt=80}setup(){this.nt=[new O(H(N[5],s(5,5,3)),0,0,G[this.gt]),...n(3).map(i=>new O(H(N[1],s(.4,.4,4.2),0,t(c(2*Math.PI/3*i),m(Math.PI/2))),0,0,G[this.gt]))],$t.push(new B(this))}jt(t,i){super.jt(t,i),this.ot&&this.Ft&&j&&(zt=1,bt.map(t=>t.emit(8,1-this.gt)))}pt(i){if(this.tt=t(this.tt,c(5e-4*i)),j)if(this.ot=this.At<0,0==(0|Mt%2e4/7e3)&&Mt-this.kt>1200&&this.Ft&&(St.push(new W(this.gt,this.R.S(.99).C(o()))),this.kt=Mt),this.Ot){if(Mt-this.Zt>2e3&&j&&(St.push(new X(this.Ot,this.R.C(C),10)),this.Zt=Mt),this.Ot.ot||this.R.I(this.Ot.R)>12)return void(this.Ot=0)}else{var s=a(St,t=>{return-(t.R.I(this.R)+1e6*(t instanceof E))},t=>t.gt!=this.gt&&(t instanceof W||t instanceof E)&&this.R.I(t.R)<12);s&&(this.Ot=s,this.Zt=l()-1500,bt.map(t=>t.St==s&&t.emit(17,1)))}}}class B extends O{constructor(t){super([[0,0,0],[.85,0,0]],Q,0,0,3),this.ht=Ot.POINTS,this.$t=t,this.z=t instanceof E}pt(t){this.ot=this.$t.ot,this.R=this.$t.R,this.X[1]=this.$t instanceof E?5.5:1.5,this.X[2]=this.$t instanceof E||this.$t instanceof V?100:50,this.it[0]=this.$t.gt,this.it[1]=.8*this.it[1]+.2*this.$t.At/Math.max(this.$t.Qt,this.$t.At+this.$t.Tt),this.it[2]=.8*this.it[2]+.2*(this.$t.At+this.$t.Tt)/Math.max(this.$t.Qt,this.$t.At+this.$t.Tt),this.et()}}class E extends q{constructor(t,i){super(),this.args=[...arguments],this.T=E.name,this.R=U[this.gt=t]||Q,this.tt=p,this.ht=i,this.Pt=0,this.Qt=this.At=70-22*i,this.Mt=2*(0==this.ht)+1}setup(){$t.push(new B(this)),this.nt=[new O(H(N[[8,7,0][this.ht]],5+2*(0==this.ht),s(0,[0,0,1][this.ht],0),c(Math.PI)),0,0,G[this.gt]),new O(H(N[[8,7,0][this.ht]],5+2*(0==this.ht),s(0,[0,0,1][this.ht],0),c(Math.PI)),0,0,G[this.gt]),new O(H(N[6],1.8,s(0,-1.5-(0==this.ht),0),c(Math.PI)),0,0,G[this.gt])],0!=this.ht&&this.nt.push(new O(H(N[3],3,0,c(Math.PI)),0,0,G[this.gt])),Kt.push(new $(this,.3,T.S(2.5+!this.ht)))}pt(t){j&&(this.ot=this.At<=0),this.Jt&&([this.tt,this.R]=this.Jt.act(l(),t))}}class W extends q{constructor(t,i){super(),this.args=[t,i],this.T=W.name,i=(i||Q).C(C),this.R=i,this.R.z=0,this.way=s(2*t-1,2*t-1,0),this.Jt=g(i,p,i.C(this.way.S(100)),5),this.tt=p,this.gt=t,this.Zt=0,this.Qt=this.At=11}setup(){this.nt=[new O(H(N[3],2,0,c(Math.PI)),0,0,G[this.gt]),new O(H(N[4],3,0,c(Math.PI)),0,0,G[this.gt]),new O(H(N[6],.8,s(0,.8,0)),0,0,G[this.gt])],Kt.push(new $(this,.1,T)),$t.push(new B(this))}It(){if(Math.abs(this.R.x-this.R.y)>15)this.Ot=undefined,this.Jt=this.Ut(s((this.R.x+this.R.y)/2,(this.R.x+this.R.y)/2,0));else if(this.Ot&&this.Ot.R){var t=this.Ot.R.I(this.R);(!(this.Ot instanceof q)||this.Ot.ot||t>13)&&(this.Ot=undefined)}else{var i=St.filter(t=>t.gt==1-this.gt&&t.R.I(this.R)<12&&(t instanceof W||t instanceof E||t instanceof V));if(i.length)this.Ot=a(i,t=>-t.R.I(this.R)),(h=this.R.I(this.Ot.R))>7&&this.Ut(this.R.F(this.Ot.R,h/4));else this.Jt&&!this.Jt.G(l())||(this.Jt=g(this.R,this.tt,this.R.C(this.way.S(100)),5))}if(this.Ot){var h,n=this.Jt&&this.Jt.act(l()+500)[1]||this.R;(h=this.R.I(this.Ot.R))>8?(!this.Jt||n.I(this.Ot.R)>=this.R.I(this.Ot.R))&&this.Ut(this.R.F(this.Ot.R,h/3)):Mt-this.Zt>950&&j&&(St.push(new X(this.Ot,this.R,1)),this.Zt=Mt,this.Jt=y(this.R,this.tt,this.R.F(this.Ot.R,.001),1,l()))}}Ut(t){for(var i=0;i<1e3;i++){var s=t.noz().C(o(i**.5).noz());if(St.every(t=>t==this||!(t instanceof W)||s.I(t.Jt&&t.Jt.act(1e90)[1]||t.R)>3))return this.Jt=y(this.R,this.tt,s,5,l())}}pt(t){this.R.Z()>100&&(this.ot=1),this.Jt&&([this.tt,this.R]=this.Jt.act(l(),t)),!this.Ct()&&j&&this.It()}}class X extends q{constructor(t,i,s){super(),this.args=[...arguments],this.T=X.name,this.Jt=M(this.R=i,p,this.yt=t,20),this.tt=p,this.qt=s,this.gt=1-t.gt,setTimeout(t=>this.ot=1,1e4)}setup(){this.Dt=new F(100,.15,[.3+this.qt/15,.2,1],L[this.gt],()=>[this.R,o(.02)]),this.Dt.dt=8,this.Dt.wt=this,this.nt=[],Kt.push(this.Dt)}pt(t){this.yt&&this.yt.R?(this.R=this.Jt.act(l(),t)[1],j&&(this.ot|=this.yt.ot,this.R.I(this.yt.R)<.01&&(this.yt.jt(this.qt,this),this.ot=1))):j&&(this.ot=1)}}class Y extends q{constructor(t,s,h,n){var e,r;super(),this.args=[...arguments],this.T=Y.name,this.R=t,this.Gt=i(c(s.U(Q)),T),this.tt=p,this.Lt=h,this.gt=this.Lt.gt,this.Rt=n,0==n?(e=15,r=15):-1==n?(e=7,r=20):(e=30,r=7),this.Jt=y(t,0,-1==n?this.R.F(s,15):this.R.C(s.S(r)),e,l()),this.Vt=l(),this.Bt={}}setup(){this.Dt=new F(500,.4-(2==this.Lt.ht&&!this.Rt)/5,[.3,.4+this.Rt/3+(this.Lt.Pt>>2)/15,1],L[this.gt],t=>1==this.Rt?[this.R.C(this.Gt.S(r()*(l()-this.Vt)/100)),o(.02)]:[this.R,o(.02)]),this.Dt.dt=10,this.Dt.wt=this,this.nt=[],Kt.push(this.Dt)}pt(t){this.R=this.Jt.act(l())[1],j&&(this.Jt.G(l())&&(-1==this.Rt&&(St.push(new it(this.R,this.gt)),St.map(t=>{t.R.I(this.R)<4.5&&(t instanceof W||t instanceof E)&&this.gt!=t.gt&&t.jt(4+2*(this.Lt.Pt>>2),this.Lt)})),this.ot=1),St.map(t=>{var i=t.R.I(this.R),s=Math.abs(this.Gt.dot(this.R.A(t.R))),h=(l()-this.Vt)/100;if(i-Math.min(h,s)*this.Rt<1.5+(t.Mt||0)&&(t instanceof W||t instanceof E||t instanceof V)&&this.Lt.gt!=t.gt&&!this.Bt[t.uid]){var n=this.Rt?1.5/Math.max(h,1):1;t.jt(n*(2+.5*(this.Lt.Pt>>2))*(3-this.Lt.ht/2),this.Lt,this),this.Rt||(this.ot=1),this.Bt[t.uid]=1}}))}}class tt extends q{constructor(t,i,s){super(),this.args=[...arguments],this.T=tt.name,this.src=t,this.dst=i,setTimeout(t=>this.ot=1,s)}setup(){this.Dt=new F(80*this.src.I(this.dst.R),.3,[.2,.2,1],R[1-this.dst.gt],t=>[this.src.N(this.dst.R,Math.random()),this.src.A(this.dst.R)._().S(.1)]),this.Dt.dt=2*this.src.I(this.dst.R),this.Dt.wt=this,Kt.push(this.Dt),this.nt=[]}}class it extends q{constructor(t,i){super(),this.args=[...arguments],this.T=it.name,setTimeout(t=>this.ot=1,400),this.R=t,this.gt=i}setup(){this.Dt=new F(400,.6,[.3,.5,1],L[this.gt],t=>[this.R.C(o()._().S(2)),o()._().noz().S(.25),1]),this.Dt.dt=20,this.Dt.wt=this,yt(wt.Et,.4),yt(wt.Wt,.4),Kt.push(this.Dt),this.nt=[]}}class st extends q{constructor(t){super(),this.args=[...arguments],this.T=st.name,setTimeout(t=>this.ot=1,300),this.yt=t}setup(){this.nt=[],this.Dt=new F(500,.3,[.2,.5,1],[.1,.3,.2],t=>[o(.5).C(C.S(1)),o(.1).C(C.S(.1))]),this.Dt.dt=30,this.Dt.wt=this,Kt.push(this.Dt)}pt(){j||(this.R=this.Dt.R=this.yt.R)}}var ht,nt=0;class et extends O{constructor(t,i){super([[nt++/6-.4,-.8,0],[1,0,0]],Q,0,0,10),this.cd=t,this.ht=Ot.POINTS,this.z=9,this.index=i}pt(t){this.X[0]=ci>=this.index&&this.X[0]+t/1e3/this.cd,this.et()}}class rt extends O{constructor(t){var i=H(N[2],s(2,2,.001));i[1].fill(_i),setTimeout(t=>this.ot=1,500),super(i,t,0,0,5)}pt(){}}class ot extends q{constructor(){if(super(),this.args=[...arguments],this.T=ot.name,this.Xt=l()+900*arguments[2],!j){yt(wt.Et,.2);var t=new Z(...arguments);t.wt=this,Kt.push(t),this.nt=[]}}pt(t){super.pt(t),this.ot=this.Xt<l()}}class at extends ot{constructor(){super(...arguments),this.args=[...arguments],this.T=at.name,j||zt||yt(wt.Et,1)}}function ct(t,i,s,h,n){var e=ht.length;ht.push(i);var r=-1e6,o=new et(t,e);return $t.push(o),{Yt:i=>ci>=e&&Mt>r+1e3*t&&(n||(t=>1))(i),q:o,act:t=>{s(t),r=Mt,o.X[0]=0,h&&yt(h,1)}}}function ut(t,i,s){n(i).map(i=>setTimeout(s=>t(i),s*i))}function _t(t,i){return ct(t,["Shoot in target direction","Launch an exploding missile at target"][0|i<0],t=>qt.emit(18,oi.R.H(),(-1==i?t:t.A(oi.R).noz()._()).H(),i),i<0?wt.ti:wt.ii)}function lt(t,i){return function(t,i,s){var h=St.filter(i||(t=>1)).map(i=>[i.R.I(t)/(s||(t=>1))(i),i]);if(0==h.length)return[void 0,1e8];var n=Math.min(...h.map(t=>t[0]));return[h=h.filter(t=>t[0]==n)[0][1],n]}(t,t=>i^t.gt!=oi.gt&&(t instanceof E||t instanceof W),t=>1+(t instanceof E))}function vt(t){return ct(5,["Shield yourself","Shield target ally"][t],i=>qt.emit(9,t?lt(i,1)[0].uid:oi.uid,20+10*(oi.Pt>>2)),wt.Tt)}function dt(t,i){t=Gt[t],i=h(i),oi.Jt=undefined,ut(i=>t.nt.map((s,h)=>{t.nt[h].B=new Float32Array(t.nt[h].W.flat().map(t=>t.S(Math.abs(i-20)/20).H()).flat()),t.nt[h].et()}),40,10)}function ft(){ht=[],nt=0,Bt=[t=>[_t(.75,0),vt(0),_t(3,-1),ct(13,"Stun target enemy",t=>qt.emit(10,lt(t)[0].uid,2e3),null,t=>lt(t)[1]<5)],t=>[_t(.75,0),ct(6,"Heals target ally",t=>qt.emit(5,lt(t,1)[0].uid,5+3*(oi.Pt>>2)),wt.si),vt(1),ct(15,"Divert all incoming attacks",t=>qt.emit(0,oi.R))],t=>[_t(.75,1),ct(7,"Speed boost in target direction",t=>{qt.emit(15,oi.Jt=y(oi.R,oi.tt,oi.R.F(t,10),50,l())),oi.zt=l()+300,qt.emit(9,oi.uid,5+5*(oi.Pt>>2))},wt.Tt,t=>!oi.Jt.L),ct(3,"Shoot 4 quick shots",t=>ut(t=>{qt.emit(18,oi.R.C(i(oi.tt,s(t%2*3-1.5,-2,0))).H(),Jt.A(oi.R.C(i(oi.tt,s(t%2*3-1.5,-2,0)))).noz()._().H()),yt(wt.ti,1)},4,200)),ct(13,"Teleport to target location",t=>qt.emit(14,t.H()))]][Dt](),[Bt.q,Bt.w,Bt.e,Bt.r]=Bt,Bt.unshift(0),rQ.style.display="block"}class mt{constructor(){var t,i,s,h,e,o,a,c,u,_;this.hi={},this.ni=(()=>{var t=this.hi;i=100/(t.f**2+.001),s=100/(t.g**2+.001),h=1-t.h**3*.01,e=1e-6*-(t.i**3),3==t.a&&(u=.5-t.n/2,_=5e-5*-t.o),o=1+t.l**2*(t.l>0?-.9:10),a=0,c=1==t.m?0:(1-t.m)**2*2e4+32}),this.ei=(()=>{this.ni();var i=this.hi;return t=[i.b**2*1e5,i.c**2*1e5,i.e**2*1e5,1],f(t)}),this.ri=((l,v)=>{var m=this.hi,w=1!=m.s||m.v,p=m.v**2*.1,x=1+3e-4*m.w,g=m.s**3*.1,y=m.x**2,M=m.q||m.r,b=m.q**2*(m.q<0?-1020:1020),z=m.p?32+((1-m.p)**2*2e4|0):0,A=m.j/2,Q=m.a,T=t[0],C=5/(1+m.u**2*20)*(.01+g);C=1-d(C,0,.8);var j,O,S,P,H=0,K=0,N=0,k=0,F=0,Z=0,$=0,J=0,I=0,U=0,q=0,D=0,G=new Array(1024),L=n(32).map(t=>r());G.fill(0);for(var R=0;R<v;R++){if(H)return R;z&&++U>=z&&(U=0,this.ni()),c&&++a>=c&&(c=0,i*=o),(i*=h+=e)>s&&(i=s,H=m.g>0),O=i,A>0&&(D+=m.k**2*.01,O*=1+Math.sin(D)*A),O=0|d(O,8,1e9),3==Q&&(u=d(u+_,0,.5)),++N>T&&(N=0,T=t[++K]);var V=N/t[K];k=[V,1+2*(1-V)*m.d,1-V,0][K],H|=3==K,M&&(b+=m.r**3*.2,(S=0|b)<0?S=-S:S>1023&&(S=1023)),w&&x&&(p=d(p*x,1e-5,.1)),l[R]=f(n(8).map(t=>(++J>=O&&(J%=O,Q<=1&&n(L.length).map(t=>{1==Q?(L[t]=q=(q+.02*r())/1.02,L[t]*=3.5):L[t]=r()})),P=[L[Math.abs(32*J/O|0)],L[Math.abs(32*J/O|0)],NaN,J/O<u?.5:-.5,P=1-J/O*2][Q],w&&(j=$,g=d(g*(1+1e-4*m.t),0,.1),1!=m.s?(Z+=(P-$)*g,Z*=C):($=P,Z=0),F+=($+=Z)-j,P=F*=1-p),M&&(G[I%1024]=P,P+=G[(I-S+1024)%1024],I++),P)))*k*y*(.5+1.5*(1==Q))}return v})}}var wt,pt,xt={};function gt(t){if(xt[t])return xt[t];var i=new mt,s=i.hi;n(24).map(i=>s[String.fromCharCode(97+i)]=t[i]||0),s.c=Math.max(s.c,.01);var h=i.ei(),e=n(0|h);return i.ri(e,h),xt[t]=e}var yt=(t,i)=>{var s=pt.createBuffer(1,t.length,48e3);s.copyToChannel(new Float32Array(t),0,0);var h=pt.createBufferSource();h.buffer=s;var n=pt.createGain();return n.gain.value=i||1,n.connect(pt.destination),h.connect(n),h.start(),h};